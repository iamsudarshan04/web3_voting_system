{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\HP\\\\Downloads\\\\web3-voting-system\\\\frontend\\\\src\\\\contexts\\\\Web3Context.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useReducer, useEffect } from 'react';\nimport { ethers } from 'ethers';\nimport toast from 'react-hot-toast';\n\n// Contract ABI (you'll need to import the full ABI from your compiled contract)\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CONTRACT_ABI = [\"function createElection(string memory _title, string memory _description, uint256 _startTime, uint256 _endTime) external returns (uint256)\", \"function addCandidate(uint256 _electionId, string memory _name, string memory _description) external\", \"function castVote(uint256 _electionId, uint256 _candidateId) external\", \"function getElection(uint256 _electionId) external view returns (tuple(uint256 id, string title, string description, uint256 startTime, uint256 endTime, bool active, bool exists, uint256 totalVotes, uint256[] candidateIds, address creator))\", \"function getElectionCandidates(uint256 _electionId) external view returns (tuple(uint256 id, string name, string description, uint256 voteCount, bool exists)[])\", \"function getElectionResults(uint256 _electionId) external view returns (tuple(uint256 id, string name, string description, uint256 voteCount, bool exists)[] candidates, uint256 totalVotes)\", \"function getWinner(uint256 _electionId) external view returns (tuple(uint256 id, string name, string description, uint256 voteCount, bool exists))\", \"function hasUserVoted(uint256 _electionId, address _voter) external view returns (bool)\", \"function getTotalElections() external view returns (uint256)\", \"function isElectionVotable(uint256 _electionId) external view returns (bool)\", \"function authorizedCreators(address) external view returns (bool)\", \"event ElectionCreated(uint256 indexed electionId, string title, address indexed creator, uint256 startTime, uint256 endTime)\", \"event VoteCast(uint256 indexed electionId, uint256 indexed candidateId, address indexed voter)\"];\nconst CONTRACT_ADDRESS = process.env.REACT_APP_CONTRACT_ADDRESS || \"0x5FbDB2315678afecb367f032d93F642f64180aa3\";\n\n// Initial state\nconst initialState = {\n  provider: null,\n  signer: null,\n  contract: null,\n  account: null,\n  connected: false,\n  loading: false,\n  elections: [],\n  currentElection: null,\n  error: null\n};\n\n// Action types\nconst ACTION_TYPES = {\n  SET_PROVIDER: 'SET_PROVIDER',\n  SET_ACCOUNT: 'SET_ACCOUNT',\n  SET_CONTRACT: 'SET_CONTRACT',\n  SET_LOADING: 'SET_LOADING',\n  SET_ELECTIONS: 'SET_ELECTIONS',\n  SET_CURRENT_ELECTION: 'SET_CURRENT_ELECTION',\n  SET_ERROR: 'SET_ERROR',\n  RESET_STATE: 'RESET_STATE'\n};\n\n// Reducer\nfunction web3Reducer(state, action) {\n  switch (action.type) {\n    case ACTION_TYPES.SET_PROVIDER:\n      return {\n        ...state,\n        provider: action.payload\n      };\n    case ACTION_TYPES.SET_ACCOUNT:\n      return {\n        ...state,\n        account: action.payload,\n        connected: !!action.payload\n      };\n    case ACTION_TYPES.SET_CONTRACT:\n      return {\n        ...state,\n        contract: action.payload\n      };\n    case ACTION_TYPES.SET_LOADING:\n      return {\n        ...state,\n        loading: action.payload\n      };\n    case ACTION_TYPES.SET_ELECTIONS:\n      return {\n        ...state,\n        elections: action.payload\n      };\n    case ACTION_TYPES.SET_CURRENT_ELECTION:\n      return {\n        ...state,\n        currentElection: action.payload\n      };\n    case ACTION_TYPES.SET_ERROR:\n      return {\n        ...state,\n        error: action.payload\n      };\n    case ACTION_TYPES.RESET_STATE:\n      return {\n        ...initialState\n      };\n    default:\n      return state;\n  }\n}\n\n// Create context\nconst Web3Context = /*#__PURE__*/createContext();\n\n// Provider component\nexport const Web3Provider = ({\n  children\n}) => {\n  _s();\n  const [state, dispatch] = useReducer(web3Reducer, initialState);\n\n  // Connect to MetaMask\n  const connectWallet = async () => {\n    if (!window.ethereum) {\n      dispatch({\n        type: ACTION_TYPES.SET_ERROR,\n        payload: 'MetaMask not found. Please install MetaMask.'\n      });\n      toast.error('MetaMask not found. Please install MetaMask.');\n      return;\n    }\n    try {\n      dispatch({\n        type: ACTION_TYPES.SET_LOADING,\n        payload: true\n      });\n\n      // Request account access\n      const accounts = await window.ethereum.request({\n        method: 'eth_requestAccounts'\n      });\n      if (accounts.length === 0) {\n        throw new Error('No accounts found');\n      }\n\n      // Check if user is on Polygon Mumbai testnet\n      const chainId = await window.ethereum.request({\n        method: 'eth_chainId'\n      });\n      const expectedChainId = process.env.REACT_APP_NETWORK_ID === '137' ? '0x89' : '0x13881'; // 0x89 = Polygon Mainnet, 0x13881 = Mumbai\n\n      if (chainId !== expectedChainId) {\n        const networkName = process.env.REACT_APP_NETWORK_NAME || 'Polygon Mumbai';\n        toast.error(`Please switch MetaMask to ${networkName}!`);\n\n        // Try to switch network automatically\n        try {\n          await window.ethereum.request({\n            method: 'wallet_switchEthereumChain',\n            params: [{\n              chainId: expectedChainId\n            }]\n          });\n        } catch (switchError) {\n          // If network doesn't exist, add it\n          if (switchError.code === 4902) {\n            await addPolygonNetwork();\n          }\n          throw switchError;\n        }\n      }\n\n      // Create provider and signer\n      const provider = new ethers.providers.Web3Provider(window.ethereum);\n      const signer = provider.getSigner();\n      const account = accounts[0];\n\n      // Create contract instance\n      const contract = new ethers.Contract(CONTRACT_ADDRESS, CONTRACT_ABI, signer);\n\n      // Update state\n      dispatch({\n        type: ACTION_TYPES.SET_PROVIDER,\n        payload: provider\n      });\n      dispatch({\n        type: ACTION_TYPES.SET_ACCOUNT,\n        payload: account\n      });\n      dispatch({\n        type: ACTION_TYPES.SET_CONTRACT,\n        payload: contract\n      });\n      toast.success('Wallet connected successfully!');\n\n      // Load elections after connecting\n      await fetchElections();\n    } catch (error) {\n      console.error('Error connecting wallet:', error);\n      dispatch({\n        type: ACTION_TYPES.SET_ERROR,\n        payload: error.message\n      });\n      toast.error(`Failed to connect wallet: ${error.message}`);\n    } finally {\n      dispatch({\n        type: ACTION_TYPES.SET_LOADING,\n        payload: false\n      });\n    }\n  };\n  const addPolygonNetwork = async () => {\n    const isMainnet = process.env.REACT_APP_NETWORK_ID === '137';\n    const networkParams = {\n      chainId: isMainnet ? '0x89' : '0x13881',\n      chainName: isMainnet ? 'Polygon Mainnet' : 'Polygon Mumbai Testnet',\n      nativeCurrency: {\n        name: 'MATIC',\n        symbol: 'MATIC',\n        decimals: 18\n      },\n      rpcUrls: [isMainnet ? 'https://rpc.ankr.com/polygon' : 'https://rpc.ankr.com/polygon_mumbai'],\n      blockExplorerUrls: [isMainnet ? 'https://polygonscan.com/' : 'https://mumbai.polygonscan.com/']\n    };\n    try {\n      await window.ethereum.request({\n        method: 'wallet_addEthereumChain',\n        params: [networkParams]\n      });\n      toast.success('Polygon network added to MetaMask!');\n    } catch (error) {\n      console.error('Error adding Polygon network:', error);\n      toast.error('Failed to add Polygon network to MetaMask');\n      throw error;\n    }\n  };\n\n  // Disconnect wallet\n  const disconnectWallet = () => {\n    dispatch({\n      type: ACTION_TYPES.RESET_STATE\n    });\n    toast.success('Wallet disconnected');\n  };\n\n  // Create new election\n  const createElection = async (title, description, startTime, endTime) => {\n    if (!state.contract) {\n      toast.error('Please connect your wallet first');\n      return;\n    }\n    try {\n      var _receipt$events, _event$args;\n      dispatch({\n        type: ACTION_TYPES.SET_LOADING,\n        payload: true\n      });\n      const tx = await state.contract.createElection(title, description, startTime, endTime);\n      const receipt = await tx.wait();\n\n      // Find the ElectionCreated event\n      const event = (_receipt$events = receipt.events) === null || _receipt$events === void 0 ? void 0 : _receipt$events.find(e => e.event === 'ElectionCreated');\n      const electionId = event === null || event === void 0 ? void 0 : (_event$args = event.args) === null || _event$args === void 0 ? void 0 : _event$args.electionId;\n      toast.success(`Election created successfully! ID: ${electionId}`);\n\n      // Refresh elections list\n      await fetchElections();\n      return electionId;\n    } catch (error) {\n      console.error('Error creating election:', error);\n      toast.error(`Failed to create election: ${error.reason || error.message}`);\n      throw error;\n    } finally {\n      dispatch({\n        type: ACTION_TYPES.SET_LOADING,\n        payload: false\n      });\n    }\n  };\n\n  // Add candidate to election\n  const addCandidate = async (electionId, name, description) => {\n    if (!state.contract) {\n      toast.error('Please connect your wallet first');\n      return;\n    }\n    try {\n      dispatch({\n        type: ACTION_TYPES.SET_LOADING,\n        payload: true\n      });\n      const tx = await state.contract.addCandidate(electionId, name, description);\n      await tx.wait();\n      toast.success('Candidate added successfully!');\n\n      // Refresh current election if it matches\n      if (state.currentElection && state.currentElection.id === electionId) {\n        await fetchElectionDetails(electionId);\n      }\n    } catch (error) {\n      console.error('Error adding candidate:', error);\n      toast.error(`Failed to add candidate: ${error.reason || error.message}`);\n      throw error;\n    } finally {\n      dispatch({\n        type: ACTION_TYPES.SET_LOADING,\n        payload: false\n      });\n    }\n  };\n\n  // Cast vote\n  const castVote = async (electionId, candidateId) => {\n    if (!state.contract) {\n      toast.error('Please connect your wallet first');\n      return;\n    }\n    try {\n      dispatch({\n        type: ACTION_TYPES.SET_LOADING,\n        payload: true\n      });\n      const tx = await state.contract.castVote(electionId, candidateId);\n      await tx.wait();\n      toast.success('Vote cast successfully!');\n\n      // Refresh current election details\n      if (state.currentElection && state.currentElection.id === electionId) {\n        await fetchElectionDetails(electionId);\n      }\n    } catch (error) {\n      console.error('Error casting vote:', error);\n      toast.error(`Failed to cast vote: ${error.reason || error.message}`);\n      throw error;\n    } finally {\n      dispatch({\n        type: ACTION_TYPES.SET_LOADING,\n        payload: false\n      });\n    }\n  };\n\n  // Fetch all elections\n  const fetchElections = async (contract = state.contract) => {\n    if (!contract) return;\n    try {\n      const totalElections = await contract.getTotalElections();\n      const elections = [];\n      for (let i = 1; i <= totalElections.toNumber(); i++) {\n        const election = await contract.getElection(i);\n        elections.push({\n          id: election.id.toNumber(),\n          title: election.title,\n          description: election.description,\n          startTime: election.startTime.toNumber(),\n          endTime: election.endTime.toNumber(),\n          active: election.active,\n          totalVotes: election.totalVotes.toNumber(),\n          creator: election.creator\n        });\n      }\n      dispatch({\n        type: ACTION_TYPES.SET_ELECTIONS,\n        payload: elections\n      });\n    } catch (error) {\n      console.error('Error fetching elections:', error);\n      dispatch({\n        type: ACTION_TYPES.SET_ERROR,\n        payload: error.message\n      });\n    }\n  };\n\n  // Fetch election details with candidates\n  const fetchElectionDetails = async electionId => {\n    if (!state.contract) return;\n    try {\n      const election = await state.contract.getElection(electionId);\n      const candidates = await state.contract.getElectionCandidates(electionId);\n      const hasVoted = state.account ? await state.contract.hasUserVoted(electionId, state.account) : false;\n      const isVotable = await state.contract.isElectionVotable(electionId);\n      const electionDetails = {\n        id: election.id.toNumber(),\n        title: election.title,\n        description: election.description,\n        startTime: election.startTime.toNumber(),\n        endTime: election.endTime.toNumber(),\n        active: election.active,\n        totalVotes: election.totalVotes.toNumber(),\n        creator: election.creator,\n        candidates: candidates.map(candidate => ({\n          id: candidate.id.toNumber(),\n          name: candidate.name,\n          description: candidate.description,\n          voteCount: candidate.voteCount.toNumber(),\n          exists: candidate.exists\n        })),\n        hasVoted,\n        isVotable\n      };\n      dispatch({\n        type: ACTION_TYPES.SET_CURRENT_ELECTION,\n        payload: electionDetails\n      });\n    } catch (error) {\n      console.error('Error fetching election details:', error);\n      dispatch({\n        type: ACTION_TYPES.SET_ERROR,\n        payload: error.message\n      });\n    }\n  };\n\n  // Check if user is authorized creator\n  const isAuthorizedCreator = async () => {\n    if (!state.contract || !state.account) return false;\n    try {\n      const isAuthorized = await state.contract.authorizedCreators(state.account);\n      return isAuthorized;\n    } catch (error) {\n      console.error('Error checking authorization:', error);\n      return false;\n    }\n  };\n\n  // Listen for account changes\n  useEffect(() => {\n    if (window.ethereum) {\n      window.ethereum.on('accountsChanged', accounts => {\n        if (accounts.length === 0) {\n          disconnectWallet();\n        } else {\n          dispatch({\n            type: ACTION_TYPES.SET_ACCOUNT,\n            payload: accounts[0]\n          });\n        }\n      });\n      window.ethereum.on('chainChanged', () => {\n        window.location.reload();\n      });\n    }\n    return () => {\n      if (window.ethereum) {\n        window.ethereum.removeAllListeners('accountsChanged');\n        window.ethereum.removeAllListeners('chainChanged');\n      }\n    };\n  }, []);\n\n  // Auto-connect if previously connected\n  useEffect(() => {\n    const autoConnect = async () => {\n      if (window.ethereum && localStorage.getItem('walletConnected')) {\n        await connectWallet();\n      }\n    };\n    autoConnect();\n  }, []);\n\n  // Save connection status\n  useEffect(() => {\n    if (state.connected) {\n      localStorage.setItem('walletConnected', 'true');\n    } else {\n      localStorage.removeItem('walletConnected');\n    }\n  }, [state.connected]);\n\n  // Fetch elections when contract is available\n  useEffect(() => {\n    if (state.contract) {\n      fetchElections();\n    }\n  }, [state.contract]);\n  const value = {\n    ...state,\n    connectWallet,\n    disconnectWallet,\n    createElection,\n    addCandidate,\n    castVote,\n    fetchElections,\n    fetchElectionDetails,\n    isAuthorizedCreator\n  };\n  return /*#__PURE__*/_jsxDEV(Web3Context.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 413,\n    columnNumber: 5\n  }, this);\n};\n\n// Custom hook to use Web3 context\n_s(Web3Provider, \"4iRlf1j8yd8EOnLzdn/Ri/p3tw0=\");\n_c = Web3Provider;\nexport const useWeb3 = () => {\n  _s2();\n  const context = useContext(Web3Context);\n  if (!context) {\n    throw new Error('useWeb3 must be used within a Web3Provider');\n  }\n  return context;\n};\n_s2(useWeb3, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nvar _c;\n$RefreshReg$(_c, \"Web3Provider\");","map":{"version":3,"names":["React","createContext","useContext","useReducer","useEffect","ethers","toast","jsxDEV","_jsxDEV","CONTRACT_ABI","CONTRACT_ADDRESS","process","env","REACT_APP_CONTRACT_ADDRESS","initialState","provider","signer","contract","account","connected","loading","elections","currentElection","error","ACTION_TYPES","SET_PROVIDER","SET_ACCOUNT","SET_CONTRACT","SET_LOADING","SET_ELECTIONS","SET_CURRENT_ELECTION","SET_ERROR","RESET_STATE","web3Reducer","state","action","type","payload","Web3Context","Web3Provider","children","_s","dispatch","connectWallet","window","ethereum","accounts","request","method","length","Error","chainId","expectedChainId","REACT_APP_NETWORK_ID","networkName","REACT_APP_NETWORK_NAME","params","switchError","code","addPolygonNetwork","providers","getSigner","Contract","success","fetchElections","console","message","isMainnet","networkParams","chainName","nativeCurrency","name","symbol","decimals","rpcUrls","blockExplorerUrls","disconnectWallet","createElection","title","description","startTime","endTime","_receipt$events","_event$args","tx","receipt","wait","event","events","find","e","electionId","args","reason","addCandidate","id","fetchElectionDetails","castVote","candidateId","totalElections","getTotalElections","i","toNumber","election","getElection","push","active","totalVotes","creator","candidates","getElectionCandidates","hasVoted","hasUserVoted","isVotable","isElectionVotable","electionDetails","map","candidate","voteCount","exists","isAuthorizedCreator","isAuthorized","authorizedCreators","on","location","reload","removeAllListeners","autoConnect","localStorage","getItem","setItem","removeItem","value","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","useWeb3","_s2","context","$RefreshReg$"],"sources":["C:/Users/HP/Downloads/web3-voting-system/frontend/src/contexts/Web3Context.js"],"sourcesContent":["import React, { createContext, useContext, useReducer, useEffect } from 'react';\nimport { ethers } from 'ethers';\nimport toast from 'react-hot-toast';\n\n// Contract ABI (you'll need to import the full ABI from your compiled contract)\nconst CONTRACT_ABI = [\n  \"function createElection(string memory _title, string memory _description, uint256 _startTime, uint256 _endTime) external returns (uint256)\",\n  \"function addCandidate(uint256 _electionId, string memory _name, string memory _description) external\",\n  \"function castVote(uint256 _electionId, uint256 _candidateId) external\",\n  \"function getElection(uint256 _electionId) external view returns (tuple(uint256 id, string title, string description, uint256 startTime, uint256 endTime, bool active, bool exists, uint256 totalVotes, uint256[] candidateIds, address creator))\",\n  \"function getElectionCandidates(uint256 _electionId) external view returns (tuple(uint256 id, string name, string description, uint256 voteCount, bool exists)[])\",\n  \"function getElectionResults(uint256 _electionId) external view returns (tuple(uint256 id, string name, string description, uint256 voteCount, bool exists)[] candidates, uint256 totalVotes)\",\n  \"function getWinner(uint256 _electionId) external view returns (tuple(uint256 id, string name, string description, uint256 voteCount, bool exists))\",\n  \"function hasUserVoted(uint256 _electionId, address _voter) external view returns (bool)\",\n  \"function getTotalElections() external view returns (uint256)\",\n  \"function isElectionVotable(uint256 _electionId) external view returns (bool)\",\n  \"function authorizedCreators(address) external view returns (bool)\",\n  \"event ElectionCreated(uint256 indexed electionId, string title, address indexed creator, uint256 startTime, uint256 endTime)\",\n  \"event VoteCast(uint256 indexed electionId, uint256 indexed candidateId, address indexed voter)\"\n];\n\nconst CONTRACT_ADDRESS = process.env.REACT_APP_CONTRACT_ADDRESS || \"0x5FbDB2315678afecb367f032d93F642f64180aa3\";\n\n// Initial state\nconst initialState = {\n  provider: null,\n  signer: null,\n  contract: null,\n  account: null,\n  connected: false,\n  loading: false,\n  elections: [],\n  currentElection: null,\n  error: null\n};\n\n// Action types\nconst ACTION_TYPES = {\n  SET_PROVIDER: 'SET_PROVIDER',\n  SET_ACCOUNT: 'SET_ACCOUNT',\n  SET_CONTRACT: 'SET_CONTRACT',\n  SET_LOADING: 'SET_LOADING',\n  SET_ELECTIONS: 'SET_ELECTIONS',\n  SET_CURRENT_ELECTION: 'SET_CURRENT_ELECTION',\n  SET_ERROR: 'SET_ERROR',\n  RESET_STATE: 'RESET_STATE'\n};\n\n// Reducer\nfunction web3Reducer(state, action) {\n  switch (action.type) {\n    case ACTION_TYPES.SET_PROVIDER:\n      return { ...state, provider: action.payload };\n    case ACTION_TYPES.SET_ACCOUNT:\n      return { ...state, account: action.payload, connected: !!action.payload };\n    case ACTION_TYPES.SET_CONTRACT:\n      return { ...state, contract: action.payload };\n    case ACTION_TYPES.SET_LOADING:\n      return { ...state, loading: action.payload };\n    case ACTION_TYPES.SET_ELECTIONS:\n      return { ...state, elections: action.payload };\n    case ACTION_TYPES.SET_CURRENT_ELECTION:\n      return { ...state, currentElection: action.payload };\n    case ACTION_TYPES.SET_ERROR:\n      return { ...state, error: action.payload };\n    case ACTION_TYPES.RESET_STATE:\n      return { ...initialState };\n    default:\n      return state;\n  }\n}\n\n// Create context\nconst Web3Context = createContext();\n\n// Provider component\nexport const Web3Provider = ({ children }) => {\n  const [state, dispatch] = useReducer(web3Reducer, initialState);\n\n  // Connect to MetaMask\n  const connectWallet = async () => {\n    if (!window.ethereum) {\n      dispatch({ type: ACTION_TYPES.SET_ERROR, payload: 'MetaMask not found. Please install MetaMask.' });\n      toast.error('MetaMask not found. Please install MetaMask.');\n      return;\n    }\n\n    try {\n      dispatch({ type: ACTION_TYPES.SET_LOADING, payload: true });\n      \n      // Request account access\n      const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });\n      \n      if (accounts.length === 0) {\n        throw new Error('No accounts found');\n      }\n\n      // Check if user is on Polygon Mumbai testnet\n      const chainId = await window.ethereum.request({ method: 'eth_chainId' });\n      const expectedChainId = process.env.REACT_APP_NETWORK_ID === '137' ? '0x89' : '0x13881'; // 0x89 = Polygon Mainnet, 0x13881 = Mumbai\n      \n      if (chainId !== expectedChainId) {\n        const networkName = process.env.REACT_APP_NETWORK_NAME || 'Polygon Mumbai';\n        toast.error(`Please switch MetaMask to ${networkName}!`);\n        \n        // Try to switch network automatically\n        try {\n          await window.ethereum.request({\n            method: 'wallet_switchEthereumChain',\n            params: [{ chainId: expectedChainId }],\n          });\n        } catch (switchError) {\n          // If network doesn't exist, add it\n          if (switchError.code === 4902) {\n            await addPolygonNetwork();\n          }\n          throw switchError;\n        }\n      }\n\n      // Create provider and signer\n      const provider = new ethers.providers.Web3Provider(window.ethereum);\n      const signer = provider.getSigner();\n      const account = accounts[0];\n\n      // Create contract instance\n      const contract = new ethers.Contract(CONTRACT_ADDRESS, CONTRACT_ABI, signer);\n\n      // Update state\n      dispatch({ type: ACTION_TYPES.SET_PROVIDER, payload: provider });\n      dispatch({ type: ACTION_TYPES.SET_ACCOUNT, payload: account });\n      dispatch({ type: ACTION_TYPES.SET_CONTRACT, payload: contract });\n\n      toast.success('Wallet connected successfully!');\n      \n      // Load elections after connecting\n      await fetchElections();\n      \n    } catch (error) {\n      console.error('Error connecting wallet:', error);\n      dispatch({ type: ACTION_TYPES.SET_ERROR, payload: error.message });\n      toast.error(`Failed to connect wallet: ${error.message}`);\n    } finally {\n      dispatch({ type: ACTION_TYPES.SET_LOADING, payload: false });\n    }\n  };\n\n  const addPolygonNetwork = async () => {\n    const isMainnet = process.env.REACT_APP_NETWORK_ID === '137';\n    \n    const networkParams = {\n      chainId: isMainnet ? '0x89' : '0x13881',\n      chainName: isMainnet ? 'Polygon Mainnet' : 'Polygon Mumbai Testnet',\n      nativeCurrency: {\n        name: 'MATIC',\n        symbol: 'MATIC',\n        decimals: 18,\n      },\n      rpcUrls: [isMainnet ? 'https://rpc.ankr.com/polygon' : 'https://rpc.ankr.com/polygon_mumbai'],\n      blockExplorerUrls: [isMainnet ? 'https://polygonscan.com/' : 'https://mumbai.polygonscan.com/'],\n    };\n\n    try {\n      await window.ethereum.request({\n        method: 'wallet_addEthereumChain',\n        params: [networkParams],\n      });\n      toast.success('Polygon network added to MetaMask!');\n    } catch (error) {\n      console.error('Error adding Polygon network:', error);\n      toast.error('Failed to add Polygon network to MetaMask');\n      throw error;\n    }\n  };\n\n  // Disconnect wallet\n  const disconnectWallet = () => {\n    dispatch({ type: ACTION_TYPES.RESET_STATE });\n    toast.success('Wallet disconnected');\n  };\n\n  // Create new election\n  const createElection = async (title, description, startTime, endTime) => {\n    if (!state.contract) {\n      toast.error('Please connect your wallet first');\n      return;\n    }\n\n    try {\n      dispatch({ type: ACTION_TYPES.SET_LOADING, payload: true });\n\n      const tx = await state.contract.createElection(title, description, startTime, endTime);\n      const receipt = await tx.wait();\n\n      // Find the ElectionCreated event\n      const event = receipt.events?.find(e => e.event === 'ElectionCreated');\n      const electionId = event?.args?.electionId;\n\n      toast.success(`Election created successfully! ID: ${electionId}`);\n      \n      // Refresh elections list\n      await fetchElections();\n      \n      return electionId;\n    } catch (error) {\n      console.error('Error creating election:', error);\n      toast.error(`Failed to create election: ${error.reason || error.message}`);\n      throw error;\n    } finally {\n      dispatch({ type: ACTION_TYPES.SET_LOADING, payload: false });\n    }\n  };\n\n  // Add candidate to election\n  const addCandidate = async (electionId, name, description) => {\n    if (!state.contract) {\n      toast.error('Please connect your wallet first');\n      return;\n    }\n\n    try {\n      dispatch({ type: ACTION_TYPES.SET_LOADING, payload: true });\n\n      const tx = await state.contract.addCandidate(electionId, name, description);\n      await tx.wait();\n\n      toast.success('Candidate added successfully!');\n      \n      // Refresh current election if it matches\n      if (state.currentElection && state.currentElection.id === electionId) {\n        await fetchElectionDetails(electionId);\n      }\n    } catch (error) {\n      console.error('Error adding candidate:', error);\n      toast.error(`Failed to add candidate: ${error.reason || error.message}`);\n      throw error;\n    } finally {\n      dispatch({ type: ACTION_TYPES.SET_LOADING, payload: false });\n    }\n  };\n\n  // Cast vote\n  const castVote = async (electionId, candidateId) => {\n    if (!state.contract) {\n      toast.error('Please connect your wallet first');\n      return;\n    }\n\n    try {\n      dispatch({ type: ACTION_TYPES.SET_LOADING, payload: true });\n\n      const tx = await state.contract.castVote(electionId, candidateId);\n      await tx.wait();\n\n      toast.success('Vote cast successfully!');\n      \n      // Refresh current election details\n      if (state.currentElection && state.currentElection.id === electionId) {\n        await fetchElectionDetails(electionId);\n      }\n    } catch (error) {\n      console.error('Error casting vote:', error);\n      toast.error(`Failed to cast vote: ${error.reason || error.message}`);\n      throw error;\n    } finally {\n      dispatch({ type: ACTION_TYPES.SET_LOADING, payload: false });\n    }\n  };\n\n  // Fetch all elections\n  const fetchElections = async (contract = state.contract) => {\n    if (!contract) return;\n\n    try {\n      const totalElections = await contract.getTotalElections();\n      const elections = [];\n\n      for (let i = 1; i <= totalElections.toNumber(); i++) {\n        const election = await contract.getElection(i);\n        elections.push({\n          id: election.id.toNumber(),\n          title: election.title,\n          description: election.description,\n          startTime: election.startTime.toNumber(),\n          endTime: election.endTime.toNumber(),\n          active: election.active,\n          totalVotes: election.totalVotes.toNumber(),\n          creator: election.creator\n        });\n      }\n\n      dispatch({ type: ACTION_TYPES.SET_ELECTIONS, payload: elections });\n    } catch (error) {\n      console.error('Error fetching elections:', error);\n      dispatch({ type: ACTION_TYPES.SET_ERROR, payload: error.message });\n    }\n  };\n\n  // Fetch election details with candidates\n  const fetchElectionDetails = async (electionId) => {\n    if (!state.contract) return;\n\n    try {\n      const election = await state.contract.getElection(electionId);\n      const candidates = await state.contract.getElectionCandidates(electionId);\n      const hasVoted = state.account ? await state.contract.hasUserVoted(electionId, state.account) : false;\n      const isVotable = await state.contract.isElectionVotable(electionId);\n\n      const electionDetails = {\n        id: election.id.toNumber(),\n        title: election.title,\n        description: election.description,\n        startTime: election.startTime.toNumber(),\n        endTime: election.endTime.toNumber(),\n        active: election.active,\n        totalVotes: election.totalVotes.toNumber(),\n        creator: election.creator,\n        candidates: candidates.map(candidate => ({\n          id: candidate.id.toNumber(),\n          name: candidate.name,\n          description: candidate.description,\n          voteCount: candidate.voteCount.toNumber(),\n          exists: candidate.exists\n        })),\n        hasVoted,\n        isVotable\n      };\n\n      dispatch({ type: ACTION_TYPES.SET_CURRENT_ELECTION, payload: electionDetails });\n    } catch (error) {\n      console.error('Error fetching election details:', error);\n      dispatch({ type: ACTION_TYPES.SET_ERROR, payload: error.message });\n    }\n  };\n\n  // Check if user is authorized creator\n  const isAuthorizedCreator = async () => {\n    if (!state.contract || !state.account) return false;\n\n    try {\n      const isAuthorized = await state.contract.authorizedCreators(state.account);\n      return isAuthorized;\n    } catch (error) {\n      console.error('Error checking authorization:', error);\n      return false;\n    }\n  };\n\n  // Listen for account changes\n  useEffect(() => {\n    if (window.ethereum) {\n      window.ethereum.on('accountsChanged', (accounts) => {\n        if (accounts.length === 0) {\n          disconnectWallet();\n        } else {\n          dispatch({ type: ACTION_TYPES.SET_ACCOUNT, payload: accounts[0] });\n        }\n      });\n\n      window.ethereum.on('chainChanged', () => {\n        window.location.reload();\n      });\n    }\n\n    return () => {\n      if (window.ethereum) {\n        window.ethereum.removeAllListeners('accountsChanged');\n        window.ethereum.removeAllListeners('chainChanged');\n      }\n    };\n  }, []);\n\n  // Auto-connect if previously connected\n  useEffect(() => {\r\n    const autoConnect = async () => {\r\n      if (window.ethereum && localStorage.getItem('walletConnected')) {\r\n        await connectWallet();\r\n      }\r\n    };\r\n\r\n    autoConnect();\r\n  }, []);\r\n\r\n  // Save connection status\r\n  useEffect(() => {\r\n    if (state.connected) {\r\n      localStorage.setItem('walletConnected', 'true');\r\n    } else {\r\n      localStorage.removeItem('walletConnected');\r\n    }\r\n  }, [state.connected]);\r\n\r\n  // Fetch elections when contract is available\r\n  useEffect(() => {\r\n    if (state.contract) {\r\n      fetchElections();\r\n    }\r\n  }, [state.contract]);\r\n\r\n  const value = {\r\n    ...state,\r\n    connectWallet,\r\n    disconnectWallet,\r\n    createElection,\r\n    addCandidate,\r\n    castVote,\r\n    fetchElections,\r\n    fetchElectionDetails,\r\n    isAuthorizedCreator\r\n  };\r\n\r\n  return (\r\n    <Web3Context.Provider value={value}>\r\n      {children}\r\n    </Web3Context.Provider>\r\n  );\r\n};\r\n\r\n// Custom hook to use Web3 context\r\nexport const useWeb3 = () => {\r\n  const context = useContext(Web3Context);\r\n  if (!context) {\r\n    throw new Error('useWeb3 must be used within a Web3Provider');\r\n  }\r\n  return context;\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}